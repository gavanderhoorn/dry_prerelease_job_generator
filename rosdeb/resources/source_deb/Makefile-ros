ROS_DISTRO_DIR_FINAL=/opt/ros/unstable
ROS_DISTRO_DIR=${ROS_DESTDIR}${ROS_DISTRO_DIR_FINAL}
ROS_STACK_DIR=${ROS_DISTRO_DIR}/stacks
ROS_STACK_DIR_FINAL=${ROS_DISTRO_DIR_FINAL}/stacks

${ROS_DISTRO_DIR}/ros: ros-1.2.1.md5 ../ros-1.2.1.tar.bz2
	md5sum -c ros-1.2.1.md5 && (mkdir -p ${ROS_DISTRO_DIR} && cd ${ROS_DISTRO_DIR} && tar -xjf $(CURDIR)/../ros-1.2.1.tar.bz2 && mv ros-1.2.1 ros)

install: ${ROS_DISTRO_DIR}/ros
	bash -c ". setup_deb.sh && cd ${ROS_DISTRO_DIR}/ros && make"
	bash -c ". setup_deb.sh && rosmake ros -i"
	rm -rf ${ROS_DISTRO_DIR}/ros/*/build/CMakeFiles
	cp setup.sh ${ROS_DISTRO_DIR}/
	./fixrpath.py ${ROS_DISTRO_DIR}/ros ${ROS_DISTRO_DIR} ${ROS_DISTRO_DIR_FINAL}
	./fixpc.py ${ROS_DISTRO_DIR}/ros ${ROS_DISTRO_DIR} ${ROS_DISTRO_DIR_FINAL}
	mv ${ROS_DISTRO_DIR}/ros/3rdparty/wxswig/bin/swig ${ROS_DISTRO_DIR}/ros/3rdparty/wxswig/bin/swig-real
	cp ./swig ${ROS_DISTRO_DIR}/ros/3rdparty/wxswig/bin/swig

clean:

